@{
    ViewBag.Title = "HomePage";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!--Todo: Move to site.css/ use ratchet guidelines -->
<style>
    #underlinehead {
        /*color: #3a84df;*/
        color:red;
        text-decoration: underline;
        margin-top: 20px;
    }

    #space {
        margin-top: 45px;
    }

    #submitButton {
        margin-top: 30px;
        width: 300px;
        height: 50px;
        font-size: 20px;
    }

    #findmebutton {
        width: 200px;
        height: 60px;
        font-size:30px;
    }
    #candidate-map-canvas{
        height:250px;
    }


</style>




<section class="page-block space-top double-space-bottom">
    <h2 id="underlinehead">Find Me I'm Drunk</h2>
    <a class="btn btn-lg btn-primary btn-center" type="button" id="submitButton" data-formid="#organizationForm" href="@Url.Action("Index","Contacts")">Create Crew</a>
    <div class="container">
        <div id="space" class="page-heading center">
        </div>
        <div class="row">
            <div class="col-md-12 col-sm-12">
                <!--Google Map-->
                <div id="candidate-map-canvas" class="google-map h-550 space-bottom google-maps" data-location="200 N Spring St Los Angeles, CA" data-zoom="12">
                    <!--Insert Location in data-location, insert map zoom in data-zoom-->
                </div>
                <!--Google Map Close-->
            </div>
            @*<iframe width="450"
                    height="250"
                    frameborder="0" style="border:0"
                    src="https://www.google.com/maps/embed/v1/search?key=AIzaSyBb84ki8We_bGQUfErc_Ddbp9C4x5ZFsds&q=LosAngeles"></iframe>*@

            <a class="btn btn-lg btn-primary btn-center" href="@Url.Action( "Crew", "MyCrew")"  id="findmebutton" data-formid="#organizationForm"> Find Me!</a>


        </div>
    </div>
</section>





@section scripts{
    <script src="~/Scripts/FindMeImDrunk.map.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">



        FindMeImDrunkStartUp = function () {


            var mapDraw = function (elementId, centerLatLng, options) {

                var mapoptions = {
                    center: centerLatLng,
                    zoom: 8,
                    enableHighAccuracy: true,
                    timeout: 5000,
                    scrollwheel: true,
                    maximumAge: 0,

                };

                var thisMap = new google.maps.Map(document.getElementById(elementId),
               mapoptions);

                return thisMap;

            }


            var mapCenter = new google.maps.LatLng(34.053477, -118.242893);

            var navoptions = {
                enableHighAccuracy: true,
                timeout: 5000,
                scaleControl: false,
                zoom: 8,
                scrollwheel: true,
                panControl: false,
                zoomControl: false,
                overviewMapControl: false

            };

            mapDraw('candidate-map-canvas', mapCenter, navoptions);
        }


        //functions commented out below should be used


        //getGeoFromBrowser = function () {
        //    if (navigator.geolocation) {
        //        navigator.geolocation.getCurrentPosition(browserGeoSuccess, browserGeoError);
        //    } else {
        //        alert('It seems like Geolocation, which is required for this page, is not enabled in your browser. Please use a browser which supports it.');
        //    }
        //}


        //browserGeoSuccess = function (position) {

        //    var lati = position.coords.latitude;
        //    var long = position.coords.longitude;

        //    geoFromBrowserObj = { lat: position.coords.latitude, lng: position.coords.longitude };
        //    var formData = "Lat=" + lati + "&Lng=" + long + "&Miles=50";

        //};


        //browserGeoError = function () {
        //    alert("Error");
        //}






// dont think we need this function below but just incase there it is..


        geoCodeByAddressOrZip = function (addressOrZip, onSuccess, onError) {
            var geocoder;
            var geocoder = new google.maps.Geocoder();


            geocoder.geocode({ 'address': addressOrZip }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    electa.page.geoCodeResult = results;
                    var thisResult = {};


                    thisResult.lat = results[0].geometry.location.lat();
                    thisResult.lng = results[0].geometry.location.lng();
                    thisResult.name = results[0].address_components[0].long_name;



                    onSuccess(thisResult);
                }

                else if (onError) {
                    onError('Geocode was not successful for the following reason: ' + status);

                }

            });

        }


        FindMeImDrunkStartUp();



    </script>
}

